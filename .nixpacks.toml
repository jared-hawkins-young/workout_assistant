[phases.setup]
aptPkgs = ["python3", "python3-pip", "gunicorn", "uvicorn"]

[phases.install]
cmds = [
    "ln -s /usr/bin/python3 /usr/local/bin/python",
    "python3 -m ensurepip --upgrade",
    "python3 -m pip install --upgrade pip",
    "python3 -m pip install --no-cache-dir -r backend/requirements.txt"
]

[start]
cmd = "gunicorn -w 4 -k uvicorn.workers.UvicornWorker backend.app:app"